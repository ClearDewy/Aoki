import{d as $,r as d,a as v,A as H,p as c,c as h,b as m,e,w as t,f as r,q as J,s as K,o as u,u as V,m as O,k as P,n as w,h as p,l as Q,F as W,v as X,_ as Y}from"./index-f12f2e9c.js";const F=f=>(J("data-v-56771d87"),f=f(),K(),f),Z={key:0,id:"register"},E={class:"register2"},ee=F(()=>m("h2",{style:{"text-align":"left"}},"用户注册",-1)),te={key:1,id:"certification"},le={class:"certification2"},oe=F(()=>m("h2",{style:{"text-align":"left"}},"完善信息",-1)),ae=$({__name:"Register",setup(f){const b=d(!1),o=v({code:"",email:"",major:"",name:"",password:"",role:2,username:""}),k=d(),U=v({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"请输入正确验证码"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:31,message:"密码不少于6位不大于31位"}]}),z=async s=>{s&&await s.validate((l,_)=>{l&&c.verifyCode(o.email,o.code).then(i=>{b.value=!0})})},g=d(!1),C=d(Date.now()),B=()=>{c.getVerifyCode(o.email).then(s=>{C.value=Date.now()+1e3*60,g.value=!0})},I=()=>{g.value=!1},x=d([]),R=d(),S=v({name:[{required:!0,message:"请输入姓名",trigger:"blur"}],rule:[{required:!0,message:"请选择身份",trigger:"blur"}],username:[{required:!0,message:"请输入学工号",trigger:"blur"}],major:[{required:!0,message:"请选择专业",trigger:"blur"}]}),A=async s=>{s&&await s.validate((l,_)=>{l&&c.register(o)})};return H(()=>{c.getAllMajor().then(s=>{s&&(x.value=s.data),console.log(x.value)})}),(s,l)=>{const _=r("el-icon"),i=r("el-input"),n=r("el-form-item"),N=r("el-countdown"),y=r("el-button"),D=r("router-link"),j=r("el-form"),q=r("el-radio"),G=r("el-radio-group"),L=r("el-option"),M=r("el-select");return b.value?(u(),h("div",te,[m("div",le,[m("div",null,[oe,e(j,{ref_key:"ruleFormRef2",ref:R,model:o,rules:S},{default:t(()=>[e(n,{prop:"name"},{default:t(()=>[e(i,{modelValue:o.name,"onUpdate:modelValue":l[4]||(l[4]=a=>o.name=a),style:{width:"280px",height:"40px","margin-top":"20px"},placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),e(n,{prop:"rule"},{default:t(()=>[e(G,{modelValue:o.role,"onUpdate:modelValue":l[5]||(l[5]=a=>o.role=a),style:{"margin-top":"20px"}},{default:t(()=>[e(q,{label:1},{default:t(()=>[p("教师")]),_:1}),e(q,{label:2},{default:t(()=>[p("学生")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"username"},{default:t(()=>[e(i,{modelValue:o.username,"onUpdate:modelValue":l[6]||(l[6]=a=>o.username=a),style:{width:"280px",height:"40px","margin-top":"20px"},placeholder:"请输入学工号"},null,8,["modelValue"])]),_:1}),e(n,{prop:"major"},{default:t(()=>[e(M,{modelValue:o.major,"onUpdate:modelValue":l[7]||(l[7]=a=>o.major=a),placeholder:"请选择专业",style:{width:"280px","margin-top":"20px"},class:"select_major"},{default:t(()=>[(u(!0),h(W,null,X(x.value,(a,T)=>(u(),w(L,{key:T,value:a,label:a},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:t(()=>[e(y,{type:"primary",onClick:l[8]||(l[8]=a=>A(R.value)),style:{width:"280px",height:"40px","margin-top":"20px"}},{default:t(()=>[p("完成 ")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])])):(u(),h("div",Z,[m("div",E,[m("div",null,[ee,e(j,{ref_key:"ruleFormRef1",ref:k,model:o,"label-width":"",rules:U},{default:t(()=>[e(n,{prop:"email"},{default:t(()=>[e(i,{modelValue:o.email,"onUpdate:modelValue":l[0]||(l[0]=a=>o.email=a),style:{width:"280px",height:"40px","margin-top":"20px"},placeholder:"请输入邮箱"},{prefix:t(()=>[e(_,{style:{"font-size":"18px"}},{default:t(()=>[e(V(O))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{prop:"code"},{default:t(()=>[e(i,{modelValue:o.code,"onUpdate:modelValue":l[1]||(l[1]=a=>o.code=a),style:{width:"280px",height:"40px","margin-top":"20px"},placeholder:"请输入验证码"},{prefix:t(()=>[e(_,{style:{"font-size":"18px"}},{default:t(()=>[e(V(P))]),_:1})]),_:1},8,["modelValue"]),g.value?(u(),w(N,{key:0,format:"ss",value:C.value,style:{position:"absolute",right:"10px",top:"24px"},"value-style":"color:#409eff;font-size: 14px",onFinish:I},null,8,["value"])):(u(),w(y,{key:1,style:{position:"absolute",right:"10px",top:"24px"},type:"text",onClick:B},{default:t(()=>[p("获取验证码 ")]),_:1}))]),_:1}),e(n,{prop:"password"},{default:t(()=>[e(i,{modelValue:o.password,"onUpdate:modelValue":l[2]||(l[2]=a=>o.password=a),style:{width:"280px",height:"40px","margin-top":"20px"},placeholder:"密码","show-password":""},{prefix:t(()=>[e(_,{style:{"font-size":"18px"}},{default:t(()=>[e(V(Q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:t(()=>[e(y,{type:"primary",onClick:l[3]||(l[3]=a=>z(k.value)),style:{width:"280px",height:"40px","margin-top":"20px"}},{default:t(()=>[p("下一步 ")]),_:1})]),_:1}),e(D,{to:"/login",type:"primary",underline:!1,style:{float:"left"}},{default:t(()=>[p(">返回")]),_:1})]),_:1},8,["model","rules"])])])]))}}});const se=Y(ae,[["__scopeId","data-v-56771d87"]]);export{se as default};
