import{d as B,r as i,i as E,c as h,e,w as o,u as v,F as g,R as b,x as f,f as d,o as w,b as _,y as Q,v as q,P as x,h as N,a5 as D,L as S,B as F,q as M,s as j,_ as P}from"./index-f12f2e9c.js";import{e as C}from"./style-da0850c1.js";const $=u=>(M("data-v-567b4898"),u=u(),j(),u),z={class:"card-header"},G={style:{margin:"auto"}},H={style:{width:"100%"}},J={style:{display:"flex","justify-content":"space-between","align-items":"center"}},K=$(()=>_("h4",null,"评分",-1)),O=B({__name:"TaskScoreEdit",setup(u){const p=i(!1),V=i([]),a=i(E.currentRoute.value.query),R=()=>{b.getTaskQuestionAnswer(a.value.id,a.value.key).then(l=>{V.value=l.data}).catch(l=>{f("获取作业详情失败")})},m=i([]),I=()=>{b.getScoreRecord(a.value.id,a.value.key).then(l=>{m.value=l.data}).catch(l=>{f("获取分数记录失败")})},U=()=>{const l={taskId:a.value.id,teamId:S.value.teamMode?a.value.key:0,username:S.value.teamMode?"":a.value.key,scoreList:m.value.map(({scoreRuleId:s,score:r})=>({scoreRuleId:s,score:r}))};b.submitScoreRecord(l).then(s=>{F("保存成功")}).catch(s=>{f("保存失败")})};return I(),R(),(l,s)=>{const r=d("el-card"),k=d("el-button"),y=d("el-table-column"),A=d("el-input-number"),L=d("el-table"),T=d("el-drawer");return w(),h(g,null,[e(r,{class:"box-card","body-style":{height:"calc(100% - 69px)",paddingTop:"0",paddingBottom:"0"}},{header:o(()=>[_("div",z,[_("h2",G,Q(a.value.name||"作业评分"),1)])]),default:o(()=>[(w(!0),h(g,null,q(V.value,(t,n)=>(w(),h("div",H,[e(r,{style:{width:"100%"},header:"Question-"+(n+1),"body-style":v(C)},{default:o(()=>[e(x,{"editor-id":"Question-"+n,modelValue:t.questionContent,"onUpdate:modelValue":c=>t.questionContent=c,"preview-only":!0},null,8,["editor-id","modelValue","onUpdate:modelValue"])]),_:2},1032,["header","body-style"]),e(r,{style:{width:"100%"},header:"Answer-"+(n+1),"body-style":v(C)},{default:o(()=>[e(x,{"editor-id":"Answer-"+n,modelValue:t.answerContent,"onUpdate:modelValue":c=>t.answerContent=c,"preview-only":!0},null,8,["editor-id","modelValue","onUpdate:modelValue"])]),_:2},1032,["header","body-style"])]))),256))]),_:1},8,["body-style"]),e(T,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t)},{header:o(({close:t,titleId:n,titleClass:c})=>[_("div",J,[K,e(k,{type:"primary",onClick:U},{default:o(()=>[N("提交")]),_:1})])]),default:o(()=>[e(L,{data:m.value,style:{height:"100%"}},{default:o(()=>[e(y,{prop:"name",label:"名称"}),e(y,{prop:"limit",label:"分数上限"}),e(y,{label:"分数"},{default:o(({row:t})=>[e(A,{modelValue:t.score,"onUpdate:modelValue":n=>t.score=n,precision:1,step:.1,max:t.limit},null,8,["modelValue","onUpdate:modelValue","step","max"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e(k,{icon:v(D),circle:"",style:{position:"fixed",top:"50%",right:"-10px"},onClick:s[1]||(s[1]=t=>p.value=!0)},null,8,["icon"])],64)}}});const Y=P(O,[["__scopeId","data-v-567b4898"]]);export{Y as default};
