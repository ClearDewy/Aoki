import{d as I,i as v,r as g,n as y,w as t,R as f,x as k,f as c,o as r,b as n,e as o,h as V,c as B,v as E,y as q,u as N,V as S,P,F as U,B as A,z as b,q as F,s as L,_ as R}from"./index-f12f2e9c.js";const $=l=>(F("data-v-716b75d7"),l=l(),L(),l),j={class:"card-header"},z=$(()=>n("h2",{style:{margin:"auto"}},"题目编辑",-1)),D={style:{"max-height":"100%",width:"100%",overflow:"auto"}},G={style:{height:"100%",width:"100%",display:"flex","justify-content":"space-between","align-items":"center"}},H={style:{"margin-right":"auto"}},J=I({__name:"TaskQuestionEdit",setup(l){const _=v.currentRoute.value.query.taskId,p={id:0,taskId:_,content:""},m=g(["1"]),e=g([]),Q=()=>{f.getTaskQuestion(_).then(s=>{e.value=s.data,e.value.length===0&&e.value.push({...p})}).catch(s=>{k("获取题目列表失败")})},T=()=>{f.editTaskQuestions(e.value).then(s=>{A("保存成功"),v.push(b.getItem("redirectPath")),b.remove("redirectPath")}).catch(s=>{k("保存失败")})};return Q(),(s,d)=>{const u=c("el-button"),w=c("el-collapse-item"),x=c("el-collapse"),C=c("el-card");return r(),y(C,{class:"box-card","body-style":{height:"calc(100% - 69px)",paddingTop:"0",paddingBottom:"0"}},{header:t(()=>[n("div",j,[z,o(u,{type:"primary",onClick:T},{default:t(()=>[V("保存")]),_:1})])]),default:t(()=>[n("div",D,[o(x,{modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=a=>m.value=a)},{default:t(()=>[(r(!0),B(U,null,E(e.value,(a,i)=>(r(),y(w,{name:i},{title:t(()=>[n("div",G,[n("h3",H,"Question-"+q(i+1),1),o(u,{icon:N(S),circle:"",style:{"margin-right":"1%"},onClick:h=>e.value.splice(i,1)},null,8,["icon","onClick"])])]),default:t(()=>[o(P,{modelValue:a.content,"onUpdate:modelValue":h=>a.content=h,"editor-id":"questionEdit"+i},null,8,["modelValue","onUpdate:modelValue","editor-id"])]),_:2},1032,["name"]))),256))]),_:1},8,["modelValue"]),o(u,{class:"mt-4",style:{width:"100%"},onClick:d[1]||(d[1]=a=>e.value.push({...p}))},{default:t(()=>[V("Add Question")]),_:1})])]),_:1},8,["body-style"])}}});const M=R(J,[["__scopeId","data-v-716b75d7"]]);export{M as default};
